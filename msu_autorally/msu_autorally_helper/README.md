# msu_autorally_helper #
The msu_autorally_helper directory contains much of the work to integrate the ROS Navigation Stack with the AutoRally platform along with a few smaller additions, such as the move_base goal handler nodes and a basic keyboard teleoperation controller node.



## Wiki ##
Please see the msu_autorally_src wiki, link below, for more detailed installation and running instructions.
Wiki: https://github.com/gsimon2/msu_autorally_src/wiki


## Directory Discriptions ##
### config directory ###
The config directory contains several parameter files for configuration the behavior of the ROS navigation stack. This file effect how the parameters are set at boot time, though many of these are configurable at run time via RQT's dynamic reconfigure package.

### launch directory ###
The launch directory contains restructed set of launch files (from those provided within the Autorally directory) this are meant to be more modular and hierarchical.  To run the full AutoRally simulation with the ROS Navigation Stack, use the "testing.launch" file.

I highly recommend using RQT's launch tree plugin to examine the launch files in this directory. More information about this plugin can be found at: http://wiki.ros.org/rqt_launchtree


### maps directory ###
The maps directory contain several occupancy maps that are supplied to the ROS Navigation Stack at boot time. This provides the platform with a basic understanding of the surronding area. I generated these maps using the GMapping package. The raw map file for the default oval track world is "base_oval_track_map.pgm". I editting this file to clean up some aspect of it to provide a better image of the track and this map file is callled "base_oval_track_map_clean.pgm".


### src directory ###
The src directory contains any of the source code for the msu_autorally_helper package.

#### Directory breakdown ####
Markup: 
* controllers
	* enki_speed_signal_publisher.py
		* This is used by Evo-ROS for the AutoRally throttle PID experiments to turn the provided Enki Genome into a Goal Speed Reference Signal.
	* speed_signal_publisher.py
		* This is used by Evo-ROS for the normal throttle PID experiments where you are evolving based off of a set goal speed reference signal.
	* teleop_keyboard_controller.py
		* This still needs work, but I was working to provide a node allowing the Autorally to be controlled from a keyboard rather than a controller.
* move_base_goal_handlers
	* move_base_goal_logger.py
		* This node can be used to collect navigation waypoint provided through the RViz interface and save them to a waypoint file.
	* move_base_goal_publisher_node.py
				* This ndoe can be used to replay a waypoint file to the AutoRally allowing a series of navigation waypoints to be published to the AutoRally automatically.
* paramater_publishers
	* constant_speed_controller_speed_pub.py
		* This is used to publish goal speeds to the AutoRally platform. It is used by most controllers that do no utilize the ROS Navigation Stack. 
	* runstopMotionEnabled_pub.py
		* This simply publishes the command to turn off the runstop parameter on the AutoRally platform, allowing it to be controller autonomously.
* tf_helpers
	* Scripts in this directory are used to publish the relevant tf information for different aspects of the system. For example both the lidar and kinect have nodes for publishing their position in relationship to the baselink of the platform. There are also to scripts for the tranformation of the Autorally platform to a set point in the world reference. "gazebo_model_state_to_baselink_tf_broadcaster.py" uses information published by Gazebo and can only be used in simulation. "odom_to_baselink_tf_broadcaster.py" uses on board sensors to estimate the platforms tranversal through the world is can be used on the physical platform, but is less accurate in simulation.
* utility_monitors
	* This are sample nodes for collecting specific data from a simulation and can be used for debugging purposes. I do not believe any of them function in production code of Evo-ROS anymore.
		
### waypoints directory ###
This directory is used to store waypoint files generated by the move_base_goal_logger.py script

### worlds directory ###
This directory provides a few sample worlds for playing with changes to the simulation environment.







